# 1. 启动文件详解

- [1. 启动文件详解](#1-启动文件详解)
  - [1.1. 栈 Stack](#11-栈-stack)
  - [1.2. 堆 Heap](#12-堆-heap)
  - [1.3. 向量表](#13-向量表)
  - [1.4. 复位程序](#14-复位程序)
  - [1.5. 中断服务程序](#15-中断服务程序)
  - [1.6. 用户堆栈初始化](#16-用户堆栈初始化)

## 1.1. 栈 Stack
> 栈的作用是用于局部变量，函数调用，函数形参等的开销，栈的大小不能超过内部 SRAM 的大小。如果编写的程序比较大，定义的局部变量很多，那么就需要修改栈的大小。如果某一天，你写的程序出现了莫名奇怪的错误，并进入了硬 fault 的时候，这时你就要考虑下是不是栈不够大，溢出了。

## 1.2. 堆 Heap
> 堆主要用来动态内存的分配，像 malloc() 函数申请的内存就在堆上面。

## 1.3. 向量表
> 当内核响应了一个发生的异常后，对应的异常服务例程 (ESR) 就会执行。为了决定 ESR 的入口地址，内核使用了“向量表查表机制”。这里使用一张向量表。向量表其实是一个 WORD（32 位整数）数组，每个下标对应一种异常，该下标元素的值则是该 ESR 的入口地址。向量表在地址空间中的位置是可以设置的，通过 NVIC 中的一个重定位寄存器来指出向量表的地址。在复位后，该寄存器的值为 0。因此，在地址 0 （即 FLASH 地址 0）处必须包含一张向量表，用于初始时的异常分配。要注意的是这里有个另类：0 号类型并不是什么入口地址，而是给出了复位后 MSP 的初值。

## 1.4. 复位程序

## 1.5. 中断服务程序

## 1.6. 用户堆栈初始化